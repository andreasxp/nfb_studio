<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.4" />
<title>nfb_studio.serialize.object_encoder.decoder API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>nfb_studio.serialize.object_encoder.decoder</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from json import JSONDecoder
from importlib import import_module
from inspect import isclass

from .encoder import ObjectEncoder


def object_decoder_hook(data: dict):
    &#34;&#34;&#34;An object hook for the ObjectDecoder.
    This method is used as an object_hook to initialize ObjectDecoder. It looks for a special value in the &#34;_metadata&#34;
    field as a marker that the json field should be deserialized as an object. It attempts to default-construct the
    specified class and call its deserialize(data: dict) method to load the json contents into it.

    Raises
    ------
    ImportError
        If no class specified by the encoder exists in the module specified by the encoder.
    TypeError
        If an attribute specified by the encoder exists in the specified module, but it&#39;s not a class;
        If the specified class exists but is not default-constructible;
        If the specified class was constructed but its deserialize method accepts something other than a single dict
        argument.
    AttributeError
        If the specified class was constructed, but it has no callable deserialize method.
    &#34;&#34;&#34;
    if &#34;_metadata&#34; not in data or data[&#34;_metadata&#34;][&#34;encoder&#34;] != ObjectEncoder.__name__:
        return data

    # This looks like json notation of a python object. Create it and deserialize json into it.
    # The following code is adapted from django.utils.module_loading module.
    module_path = data[&#34;_metadata&#34;][&#34;__class__&#34;][&#34;__module__&#34;]
    class_name = data[&#34;_metadata&#34;][&#34;__class__&#34;][&#34;__name__&#34;]

    module = import_module(module_path)

    # Get the class that needs to be instantiated
    try:
        cls = getattr(module, class_name)
    except AttributeError:
        message = &#34;ObjectDecoder: module \&#34;{}\&#34; does not define a \&#34;{}\&#34; class&#34;.format(module_path, class_name)
        raise ImportError(message)

    # Verify that cls is in fact a class
    if not isclass(cls):
        raise TypeError(&#34;ObjectDecoder: {}.{} is not a class&#34;.format(module_path, class_name))

    # Create an object of that class
    obj = cls()

    # Load the json data into the object
    if hasattr(obj, &#34;deserialize&#34;) and callable(obj.deserialize):
        obj.deserialize(data)
        return obj
    else:
        message = &#34;ObjectDecoder: an instance of {}.{} does not have a callable \&#34;deserialize\&#34; attribute&#34; \
            .format(module_path, class_name)
        raise AttributeError(message)


class ObjectDecoder(JSONDecoder):
    def __init__(self, **kwargs):
        &#34;&#34;&#34;JSON decoder that provides objects with a way to decode themselves.
        After deserializing a dict, this decoder checks if it has a &#34;__class__&#34; field. If so, it considers the dict a
        representation of a python object. It then attempts to create an instance of the specified class with no
        constructor arguments, and call that instance&#39;s deserialize method with the data dict.

        See Also
        --------
        ObjectEncoder : JSON Object Encoder
        object_decoder_hook : The function used to decode objects
        &#34;&#34;&#34;
        # Object hook used to handle custom deserialization
        my_hook = object_decoder_hook

        # Check if user also has their own hook
        if &#34;object_hook&#34; in kwargs:
            # Yes: replace their hook with a combination of their hook and our hook
            user_hook = kwargs[&#34;object_hook&#34;]

            def combined_hook(data):
                return user_hook(my_hook(data))

            kwargs[&#34;object_hook&#34;] = combined_hook
        else:
            # No: add our hook as the object_hook
            kwargs[&#34;object_hook&#34;] = my_hook

        super().__init__(**kwargs)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="nfb_studio.serialize.object_encoder.decoder.object_decoder_hook"><code class="name flex">
<span>def <span class="ident">object_decoder_hook</span></span>(<span>data)</span>
</code></dt>
<dd>
<section class="desc"><p>An object hook for the ObjectDecoder.
This method is used as an object_hook to initialize ObjectDecoder. It looks for a special value in the "_metadata"
field as a marker that the json field should be deserialized as an object. It attempts to default-construct the
specified class and call its deserialize(data: dict) method to load the json contents into it.</p>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ImportError</code></dt>
<dd>If no class specified by the encoder exists in the module specified by the encoder.</dd>
<dt><code>TypeError</code></dt>
<dd>If an attribute specified by the encoder exists in the specified module, but it's not a class;
If the specified class exists but is not default-constructible;
If the specified class was constructed but its deserialize method accepts something other than a single dict
argument.</dd>
<dt><code>AttributeError</code></dt>
<dd>If the specified class was constructed, but it has no callable deserialize method.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def object_decoder_hook(data: dict):
    &#34;&#34;&#34;An object hook for the ObjectDecoder.
    This method is used as an object_hook to initialize ObjectDecoder. It looks for a special value in the &#34;_metadata&#34;
    field as a marker that the json field should be deserialized as an object. It attempts to default-construct the
    specified class and call its deserialize(data: dict) method to load the json contents into it.

    Raises
    ------
    ImportError
        If no class specified by the encoder exists in the module specified by the encoder.
    TypeError
        If an attribute specified by the encoder exists in the specified module, but it&#39;s not a class;
        If the specified class exists but is not default-constructible;
        If the specified class was constructed but its deserialize method accepts something other than a single dict
        argument.
    AttributeError
        If the specified class was constructed, but it has no callable deserialize method.
    &#34;&#34;&#34;
    if &#34;_metadata&#34; not in data or data[&#34;_metadata&#34;][&#34;encoder&#34;] != ObjectEncoder.__name__:
        return data

    # This looks like json notation of a python object. Create it and deserialize json into it.
    # The following code is adapted from django.utils.module_loading module.
    module_path = data[&#34;_metadata&#34;][&#34;__class__&#34;][&#34;__module__&#34;]
    class_name = data[&#34;_metadata&#34;][&#34;__class__&#34;][&#34;__name__&#34;]

    module = import_module(module_path)

    # Get the class that needs to be instantiated
    try:
        cls = getattr(module, class_name)
    except AttributeError:
        message = &#34;ObjectDecoder: module \&#34;{}\&#34; does not define a \&#34;{}\&#34; class&#34;.format(module_path, class_name)
        raise ImportError(message)

    # Verify that cls is in fact a class
    if not isclass(cls):
        raise TypeError(&#34;ObjectDecoder: {}.{} is not a class&#34;.format(module_path, class_name))

    # Create an object of that class
    obj = cls()

    # Load the json data into the object
    if hasattr(obj, &#34;deserialize&#34;) and callable(obj.deserialize):
        obj.deserialize(data)
        return obj
    else:
        message = &#34;ObjectDecoder: an instance of {}.{} does not have a callable \&#34;deserialize\&#34; attribute&#34; \
            .format(module_path, class_name)
        raise AttributeError(message)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="nfb_studio.serialize.object_encoder.decoder.ObjectDecoder"><code class="flex name class">
<span>class <span class="ident">ObjectDecoder</span></span>
<span>(</span><span>**kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Simple JSON <a href="http://json.org">http://json.org</a> decoder</p>
<p>Performs the following translations in decoding by default:</p>
<p>+---------------+-------------------+
| JSON
| Python
|
+===============+===================+
| object
| dict
|
+---------------+-------------------+
| array
| list
|
+---------------+-------------------+
| string
| str
|
+---------------+-------------------+
| number (int)
| int
|
+---------------+-------------------+
| number (real) | float
|
+---------------+-------------------+
| true
| True
|
+---------------+-------------------+
| false
| False
|
+---------------+-------------------+
| null
| None
|
+---------------+-------------------+</p>
<p>It also understands <code>NaN</code>, <code>Infinity</code>, and <code>-Infinity</code> as
their corresponding <code>float</code> values, which is outside the JSON spec.</p>
<p>JSON decoder that provides objects with a way to decode themselves.
After deserializing a dict, this decoder checks if it has a "<strong>class</strong>" field. If so, it considers the dict a
representation of a python object. It then attempts to create an instance of the specified class with no
constructor arguments, and call that instance's deserialize method with the data dict.</p>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>ObjectEncoder</code></dt>
<dd>JSON Object Encoder</dd>
<dt><a title="nfb_studio.serialize.object_encoder.decoder.object_decoder_hook" href="#nfb_studio.serialize.object_encoder.decoder.object_decoder_hook"><code>object_decoder_hook()</code></a></dt>
<dd>The function used to decode objects</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ObjectDecoder(JSONDecoder):
    def __init__(self, **kwargs):
        &#34;&#34;&#34;JSON decoder that provides objects with a way to decode themselves.
        After deserializing a dict, this decoder checks if it has a &#34;__class__&#34; field. If so, it considers the dict a
        representation of a python object. It then attempts to create an instance of the specified class with no
        constructor arguments, and call that instance&#39;s deserialize method with the data dict.

        See Also
        --------
        ObjectEncoder : JSON Object Encoder
        object_decoder_hook : The function used to decode objects
        &#34;&#34;&#34;
        # Object hook used to handle custom deserialization
        my_hook = object_decoder_hook

        # Check if user also has their own hook
        if &#34;object_hook&#34; in kwargs:
            # Yes: replace their hook with a combination of their hook and our hook
            user_hook = kwargs[&#34;object_hook&#34;]

            def combined_hook(data):
                return user_hook(my_hook(data))

            kwargs[&#34;object_hook&#34;] = combined_hook
        else:
            # No: add our hook as the object_hook
            kwargs[&#34;object_hook&#34;] = my_hook

        super().__init__(**kwargs)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>json.decoder.JSONDecoder</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="nfb_studio.serialize.object_encoder" href="index.html">nfb_studio.serialize.object_encoder</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="nfb_studio.serialize.object_encoder.decoder.object_decoder_hook" href="#nfb_studio.serialize.object_encoder.decoder.object_decoder_hook">object_decoder_hook</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="nfb_studio.serialize.object_encoder.decoder.ObjectDecoder" href="#nfb_studio.serialize.object_encoder.decoder.ObjectDecoder">ObjectDecoder</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.4</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>