language: python
branches: master

install:
    - pip install -e .[docs]

script: true

before_deploy:
    - pdoc --html --force --output-dir docs nfb_studio
    - mkdir temp
    - cp -R docs/nfb_studio/* temp/
    - rm -rf docs/nfb_studio
    - cp -R temp/* docs/
    - rm -rf temp

deploy: # Deploy documentation to Github in the gh_pages branch
    provider: pages
    skip_cleanup: true
    github_token: $github_token
    local_dir: docs
    on:
        branch: master