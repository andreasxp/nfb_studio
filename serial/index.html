<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.3" />
<title>nfb_studio.serial API documentation</title>
<meta name="description" content="A module that implements nfb_studio&#39;s custom serialization engine …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>nfb_studio.serial</code></h1>
</header>
<section id="section-intro">
<p>A module that implements nfb_studio's custom serialization engine.</p>
<p>This module adds classes and methods that can serialize objects to different data formats. Corresponding functions and
classes can be found in nested modules, such as <code>serial.json</code>.</p>
<ul>
<li>If a class you want serialized is in your control, you can define these two member functions:</li>
</ul>
<pre><code class="python">def serialize(self) -&gt; dict:
def deserialize(self, data: dict):
</code></pre>
<p>These functions return/accept a dictionary containing the data that is necessary to save and required to recreate the
object during deserialization.</p>
<ul>
<li>If a class is out of your control, such as a class from another module, you will need to create "hooks" - external
functions and pass them to the encoder you are using.</li>
</ul>
<pre><code class="python"># Names here do not matter (these functions can even be lambdas).
def serialize(obj) -&gt; dict:
def deserialize(obj, data: dict):
</code></pre>
<p>Put these functions in a dict that maps a type to a serialization function, and pass that dict as an argument to an
encoder.</p>
<pre><code class="python">from serial.json import JSONEncoder

# Create a hook dict and pass it to the constuctor
my_serialization_hooks = {Point: serialize_point, Line: serialize_line}
my_encoder = JSONEncoder(hooks=my_serialization_hooks)
</code></pre>
<p>For convenience, you can store both serialization and deserialization hooks in one tuple or a <code><a title="nfb_studio.serial.hooks.Hooks" href="hooks/index.html#nfb_studio.serial.hooks.Hooks">Hooks</a></code> object,
and pass that around instead:</p>
<pre><code class="python">my_hooks = Hooks(my_serialization_hooks, my_deserialization_hooks)  # tuple works too
my_encoder = JSONEncoder(hooks=my_hooks)
</code></pre>
<p>This module supplies some commonly used hooks in the <code>serial.hooks</code> nested module. Hooks supplied manually take
precedence over member functions.</p>
<h2 id="example">Example</h2>
<pre><code class="python">from serial.json import JSONEncoder, JSONDecoder

# A class that can be modified in an invasive way.
class MyClass:
    def __init__(self, a=None, b=None, c=None):
        self.a = a
        self.b = b
        self.c = c

    def serialize(self) -&gt; dict:
        return {
            &quot;a&quot;: self.a
            &quot;b&quot;: self.b
            &quot;c&quot;: self.c
        }

    def deserialize(self, data: dict):
        self.a = data[&quot;a&quot;]
        self.b = data[&quot;b&quot;]
        self.c = data[&quot;c&quot;]

# A class that cannot be modified in an invasive way.
from PySide2.QtCore import QRect
def qrect_serialize(obj: QRect) -&gt; dict:
    return {
        &quot;x&quot;: obj.x()
        &quot;y&quot;: obj.y()
        &quot;width&quot; = obj.width()
        &quot;height&quot; = obj.height()
    }

def qrect_deserialize(obj: QRect, data: dict):
    obj.setX(data[&quot;x&quot;])
    obj.setY(data[&quot;y&quot;])
    obj.setWidth(data[&quot;width&quot;])
    obj.setHeight(data[&quot;height&quot;])

encoder = JSONEncoder(hooks={QRect: qrect_serialize})
decoder = JSONDecoder(hooks={QRect: qrect_deserialize})
</code></pre>
<p>In this example, the encoder and decoder will be able to serialize both <code>MyClass</code> and <code>QRect</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The dictionaries returned by the serialization functions do not need to be primitive data structures containing only
dicts, strings, lists, and numbers. The keys should be strings, but values can be instances of any class, as long as
that class is serializeable.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In order for the decoder to know which dicts should be deserialized as which class instances, the encoder adds a
metadata field to the serialized dictionary called <code>__class__</code>. Do not write anything to that field - it will be
overwritten.</p>
</div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;A module that implements nfb_studio&#39;s custom serialization engine.

This module adds classes and methods that can serialize objects to different data formats. Corresponding functions and
classes can be found in nested modules, such as `serial.json`.

- If a class you want serialized is in your control, you can define these two member functions:
```python
def serialize(self) -&gt; dict:
def deserialize(self, data: dict):
```
These functions return/accept a dictionary containing the data that is necessary to save and required to recreate the
object during deserialization.

- If a class is out of your control, such as a class from another module, you will need to create &#34;hooks&#34; - external 
functions and pass them to the encoder you are using.
```python
# Names here do not matter (these functions can even be lambdas).
def serialize(obj) -&gt; dict:
def deserialize(obj, data: dict):
```
Put these functions in a dict that maps a type to a serialization function, and pass that dict as an argument to an
encoder.
```python
from serial.json import JSONEncoder

# Create a hook dict and pass it to the constuctor
my_serialization_hooks = {Point: serialize_point, Line: serialize_line}
my_encoder = JSONEncoder(hooks=my_serialization_hooks)
```
For convenience, you can store both serialization and deserialization hooks in one tuple or a `hooks.Hooks` object,
and pass that around instead:
```python
my_hooks = Hooks(my_serialization_hooks, my_deserialization_hooks)  # tuple works too
my_encoder = JSONEncoder(hooks=my_hooks)
```
This module supplies some commonly used hooks in the `serial.hooks` nested module. Hooks supplied manually take
precedence over member functions.

Example
-------
```python
from serial.json import JSONEncoder, JSONDecoder

# A class that can be modified in an invasive way.
class MyClass:
    def __init__(self, a=None, b=None, c=None):
        self.a = a
        self.b = b
        self.c = c

    def serialize(self) -&gt; dict:
        return {
            &#34;a&#34;: self.a
            &#34;b&#34;: self.b
            &#34;c&#34;: self.c
        }

    def deserialize(self, data: dict):
        self.a = data[&#34;a&#34;]
        self.b = data[&#34;b&#34;]
        self.c = data[&#34;c&#34;]

# A class that cannot be modified in an invasive way.
from PySide2.QtCore import QRect
def qrect_serialize(obj: QRect) -&gt; dict:
    return {
        &#34;x&#34;: obj.x()
        &#34;y&#34;: obj.y()
        &#34;width&#34; = obj.width()
        &#34;height&#34; = obj.height()
    }

def qrect_deserialize(obj: QRect, data: dict):
    obj.setX(data[&#34;x&#34;])
    obj.setY(data[&#34;y&#34;])
    obj.setWidth(data[&#34;width&#34;])
    obj.setHeight(data[&#34;height&#34;])

encoder = JSONEncoder(hooks={QRect: qrect_serialize})
decoder = JSONDecoder(hooks={QRect: qrect_deserialize})
```
In this example, the encoder and decoder will be able to serialize both `MyClass` and `QRect`.

.. tip::
    The dictionaries returned by the serialization functions do not need to be primitive data structures containing only
    dicts, strings, lists, and numbers. The keys should be strings, but values can be instances of any class, as long as
    that class is serializeable.

.. warning::
    In order for the decoder to know which dicts should be deserialized as which class instances, the encoder adds a
    metadata field to the serialized dictionary called `__class__`. Do not write anything to that field - it will be
    overwritten.
&#34;&#34;&#34;
from .hooks import Hooks</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="nfb_studio.serial.base" href="base/index.html">nfb_studio.serial.base</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="nfb_studio.serial.hooks" href="hooks/index.html">nfb_studio.serial.hooks</a></code></dt>
<dd>
<div class="desc"><p>Library-provided serialization hooks for some common classes.</p></div>
</dd>
<dt><code class="name"><a title="nfb_studio.serial.json" href="json/index.html">nfb_studio.serial.json</a></code></dt>
<dd>
<div class="desc"><p>A module responsible for serializing data into json …</p></div>
</dd>
<dt><code class="name"><a title="nfb_studio.serial.mime" href="mime.html">nfb_studio.serial.mime</a></code></dt>
<dd>
<div class="desc"><p>Serialization support for mime data …</p></div>
</dd>
<dt><code class="name"><a title="nfb_studio.serial.xml" href="xml/index.html">nfb_studio.serial.xml</a></code></dt>
<dd>
<div class="desc"><p>Serialization support for xml data.</p></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#example">Example</a></li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="nfb_studio" href="../index.html">nfb_studio</a></code></li>
</ul>
</li>
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="nfb_studio.serial.base" href="base/index.html">nfb_studio.serial.base</a></code></li>
<li><code><a title="nfb_studio.serial.hooks" href="hooks/index.html">nfb_studio.serial.hooks</a></code></li>
<li><code><a title="nfb_studio.serial.json" href="json/index.html">nfb_studio.serial.json</a></code></li>
<li><code><a title="nfb_studio.serial.mime" href="mime.html">nfb_studio.serial.mime</a></code></li>
<li><code><a title="nfb_studio.serial.xml" href="xml/index.html">nfb_studio.serial.xml</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.3</a>.</p>
</footer>
</body>
</html>