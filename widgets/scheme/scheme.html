<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.5" />
<title>nfb_studio.widgets.scheme.scheme API documentation</title>
<meta name="description" content="A data model for the nfb experiment&#39;s system of signals and their components." />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>nfb_studio.widgets.scheme.scheme</code></h1>
</header>
<section id="section-intro">
<p>A data model for the nfb experiment's system of signals and their components.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;A data model for the nfb experiment&#39;s system of signals and their components.&#34;&#34;&#34;
from typing import Union

from PySide2.QtCore import Qt, QPointF
from PySide2.QtGui import QPainter, QKeySequence
from PySide2.QtWidgets import QGraphicsScene, QGraphicsView, QGraphicsItem, QShortcut, QApplication

from nfb_studio import StdMimeData

from .graph import AbstractGraph, Graph, GraphSnapshot
from .node import Node
from .edge import Edge
from .connection import Input, Output
from .style import Style
from .palette import Palette


class Scheme(QGraphicsScene):
    &#34;&#34;&#34;A data model for the nfb experiment&#39;s system of signals and their components.

    This class is a combination of nfb_studio.widgets.scheme.Graph and a QGraphicsScene, which represents the node graph
    in a graphical scene that is then displayed by a QGraphicsView. To get a QGraphicsView that is pre-configured to
    display the contents correcly and has all the necessary shortcuts attached, use the `getView` method.        

    See Also
    --------
    nfb_studio.widgets.scheme.Node : Graph node.
    nfb_studio.widgets.scheme.Edge : Graph edge.
    nfb_studio.widgets.scheme.Graph : A collection of nodes and edges.
    &#34;&#34;&#34;
    def __init__(self, parent=None):
        &#34;&#34;&#34;Constructs a Scheme with an optional `parent` parameter that is passed to the super().&#34;&#34;&#34;
        super().__init__(parent)
        self._graph = Graph()

        self._style = Style()
        self._palette = Palette()

        self.schemeStyleChange()
        self.schemePaletteChange()

    # Element manipulation =============================================================================================
    def addItem(self, item: QGraphicsItem):
        &#34;&#34;&#34;Add an item to the scene.

        An override of super().addItem method that detects when a node or edge was added.
        &#34;&#34;&#34;
        if isinstance(item, Node):
            self._graph.addNode(item)
        elif isinstance(item, Edge):
            self._graph.addEdge(item)
        else:
            raise TypeError(&#34;unrecognised graphics item of type &#34; + type(item).__name__)

        super().addItem(item)

    def removeItem(self, item):
        &#34;&#34;&#34;Add an item to the scene.

        An override of super().removeItem method that detects when a node or edge was removed.
        &#34;&#34;&#34;
        # Remove a Node ------------------------------------------------------------------------------------------------
        if isinstance(item, Node):
            # Remove connected edges first
            to_remove = []
            for edge in self._graph.edges:
                if edge.source_node() == item or edge.target_node() == item:
                    to_remove.append(edge)
            
            for edge in to_remove:
                self.removeItem(edge)

            # Remove the node
            self._graph.removeNode(item)
        # Remove an Edge -----------------------------------------------------------------------------------------------
        elif isinstance(item, Edge):
            self._graph.removeEdge(item)
        # Unknown item -------------------------------------------------------------------------------------------------
        else:
            raise TypeError(&#34;unrecognised graphics item of type &#34; + type(item).__name__)

        super().removeItem(item)

    def connect_nodes(self, source: Output, target: Input):
        &#34;&#34;&#34;Connect an Output connection to an Input connection with an edge.
        
        Returns the newly created edge.
        &#34;&#34;&#34;
        edge = self._graph.connect_nodes(source, target)
        super().addItem(edge)

        return edge

    def disconnect_nodes(self, source: Output, target: Input):
        &#34;&#34;&#34;Remove a connection between a node output and an input.
        
        If output and input are connected more than once, only one edge is removed.
        Returns the edge that was removed, or None if no such edge was found.
        &#34;&#34;&#34;
        edge = self._graph.disconnect_nodes(source, target)
        if edge is not None:
            super().removeItem(edge)
        return edge

    def extract(self, other: AbstractGraph):
        &#34;&#34;&#34;Update the scheme, removing elements from a graph.
        
        `other` represents a subgraph of the scheme graph that is to be extracted.
        &#34;&#34;&#34;
        for node in other.nodes:
            self.removeItem(node)

    def merge(self, other: AbstractGraph):
        &#34;&#34;&#34;Update the scheme, adding elements from a graph.&#34;&#34;&#34;
        self._graph.merge(other)

        for node in other.nodes:
            super().addItem(node)
        for edge in other.edges:
            super().addItem(edge)

    def clear(self):
        &#34;&#34;&#34;Clear the scheme.&#34;&#34;&#34;
        super().clear()
        self._graph.clear()

    # Observer methods =================================================================================================
    def findNode(self, node_id: int) -&gt; Union[Node, None]:
        return self._graph.findNode(node_id)

    # Selection ========================================================================================================
    def selectAll(self):
        self._graph.selectAll()

    def selection(self) -&gt; GraphSnapshot:
        return self._graph.selection()
    
    def wideSelection(self) -&gt; GraphSnapshot:
        return self._graph.wideSelection()

    # User actions =====================================================================================================
    def cutEvent(self):
        &#34;&#34;&#34;Cut the selected graph and place it in the clipboard.&#34;&#34;&#34;
        self.copyEvent()
        self.deleteEvent()

    def copyEvent(self):
        &#34;&#34;&#34;Copy the selected graph and place it in the clipboard.&#34;&#34;&#34;
        snapshot = self.selection()

        package = StdMimeData()
        package.setObject(snapshot)

        clipboard = QApplication.clipboard()
        clipboard.setMimeData(package.qmimedata)

    def pasteEvent(self):
        &#34;&#34;&#34;Retrieve the data from a clipboard and paste it.&#34;&#34;&#34;
        clipboard = QApplication.clipboard()
        package = StdMimeData(clipboard.mimeData())

        if package.hasObject(GraphSnapshot):
            snapshot = package.objectData(GraphSnapshot)

            self.clearSelection()  # Clear old selection

            snapshot.selectAll()  # Create new selection (pasted items)

            offset = self.schemeStyle().pixelMetric(Style.PasteOffset)
            snapshot.moveBy(offset, offset)  # Move all items by some offset 
            
            self.merge(snapshot)

            self.copyEvent()  # Copy the selection again (nothing changes except for the item offset)

    def deleteEvent(self):
        &#34;&#34;&#34;Delete the selection.&#34;&#34;&#34;
        self.extract(self.selection())

    # Style and palette ================================================================================================
    def schemeStyleChange(self):
        pass

    def schemePaletteChange(self):
        self.setBackgroundBrush(self.schemePalette().background())

    def schemeStyle(self):
        return self._style

    def setSchemeStyle(self, style):
        self._style = style
        self.schemeStyleChange()

    def schemePalette(self):
        return self._palette
    
    def setSchemePalette(self, palette):
        self._palette = palette
        self.schemePaletteChange()

    # Widgets ==========================================================================================================
    def getView(self) -&gt; QGraphicsView:
        &#34;&#34;&#34;Generate and return a new QGraphicsView, configured for optimal viewing.&#34;&#34;&#34;
        v = QGraphicsView(self)
        v.setDragMode(QGraphicsView.RubberBandDrag)
        v.setRubberBandSelectionMode(Qt.ContainsItemShape)
        v.setRenderHint(QPainter.Antialiasing)
        v.setRenderHint(QPainter.SmoothPixmapTransform)

        cut_shortcut = QShortcut(QKeySequence.Cut, v)
        cut_shortcut.activated.connect(self.cutEvent)

        copy_shortcut = QShortcut(QKeySequence.Copy, v)
        copy_shortcut.activated.connect(self.copyEvent)

        paste_shortcut = QShortcut(QKeySequence.Paste, v)
        paste_shortcut.activated.connect(self.pasteEvent)

        delete_shortcut = QShortcut(QKeySequence.Delete, v)
        delete_shortcut.activated.connect(self.deleteEvent)

        return v

    # Serialization ====================================================================================================
    # def serialize(self) -&gt; dict: Inherited from Graph

    def deserialize(self, data: dict):
        &#34;&#34;&#34;Deserialize this object from a dict of data.&#34;&#34;&#34;
        # Clear --------------------------------------------------------------------------------------------------------
        for node in self.nodes:
            self.removeItem(node)

        # Deserialize as graph -----------------------------------------------------------------------------------------
        self._graph.deserialize(data)

        # Bring the scene up to speed ----------------------------------------------------------------------------------
        for node in self.nodes:
            super().addItem(node)

        for edge in self.edges:
            super().addItem(edge)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme"><code class="flex name class">
<span>class <span class="ident">Scheme</span></span>
<span>(</span><span>parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>A data model for the nfb experiment's system of signals and their components.</p>
<p>This class is a combination of nfb_studio.widgets.scheme.Graph and a QGraphicsScene, which represents the node graph
in a graphical scene that is then displayed by a QGraphicsView. To get a QGraphicsView that is pre-configured to
display the contents correcly and has all the necessary shortcuts attached, use the <code>getView</code> method.
</p>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>nfb_studio.widgets.scheme.Node</code></dt>
<dd>Graph node.</dd>
<dt><code>nfb_studio.widgets.scheme.Edge</code></dt>
<dd>Graph edge.</dd>
<dt><code>nfb_studio.widgets.scheme.Graph</code></dt>
<dd>A collection of nodes and edges.</dd>
</dl>
<p><code>Constructs a Scheme with an optional</code>parent<code>parameter that is passed to the super().</code></p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Scheme(QGraphicsScene):
    &#34;&#34;&#34;A data model for the nfb experiment&#39;s system of signals and their components.

    This class is a combination of nfb_studio.widgets.scheme.Graph and a QGraphicsScene, which represents the node graph
    in a graphical scene that is then displayed by a QGraphicsView. To get a QGraphicsView that is pre-configured to
    display the contents correcly and has all the necessary shortcuts attached, use the `getView` method.        

    See Also
    --------
    nfb_studio.widgets.scheme.Node : Graph node.
    nfb_studio.widgets.scheme.Edge : Graph edge.
    nfb_studio.widgets.scheme.Graph : A collection of nodes and edges.
    &#34;&#34;&#34;
    def __init__(self, parent=None):
        &#34;&#34;&#34;Constructs a Scheme with an optional `parent` parameter that is passed to the super().&#34;&#34;&#34;
        super().__init__(parent)
        self._graph = Graph()

        self._style = Style()
        self._palette = Palette()

        self.schemeStyleChange()
        self.schemePaletteChange()

    # Element manipulation =============================================================================================
    def addItem(self, item: QGraphicsItem):
        &#34;&#34;&#34;Add an item to the scene.

        An override of super().addItem method that detects when a node or edge was added.
        &#34;&#34;&#34;
        if isinstance(item, Node):
            self._graph.addNode(item)
        elif isinstance(item, Edge):
            self._graph.addEdge(item)
        else:
            raise TypeError(&#34;unrecognised graphics item of type &#34; + type(item).__name__)

        super().addItem(item)

    def removeItem(self, item):
        &#34;&#34;&#34;Add an item to the scene.

        An override of super().removeItem method that detects when a node or edge was removed.
        &#34;&#34;&#34;
        # Remove a Node ------------------------------------------------------------------------------------------------
        if isinstance(item, Node):
            # Remove connected edges first
            to_remove = []
            for edge in self._graph.edges:
                if edge.source_node() == item or edge.target_node() == item:
                    to_remove.append(edge)
            
            for edge in to_remove:
                self.removeItem(edge)

            # Remove the node
            self._graph.removeNode(item)
        # Remove an Edge -----------------------------------------------------------------------------------------------
        elif isinstance(item, Edge):
            self._graph.removeEdge(item)
        # Unknown item -------------------------------------------------------------------------------------------------
        else:
            raise TypeError(&#34;unrecognised graphics item of type &#34; + type(item).__name__)

        super().removeItem(item)

    def connect_nodes(self, source: Output, target: Input):
        &#34;&#34;&#34;Connect an Output connection to an Input connection with an edge.
        
        Returns the newly created edge.
        &#34;&#34;&#34;
        edge = self._graph.connect_nodes(source, target)
        super().addItem(edge)

        return edge

    def disconnect_nodes(self, source: Output, target: Input):
        &#34;&#34;&#34;Remove a connection between a node output and an input.
        
        If output and input are connected more than once, only one edge is removed.
        Returns the edge that was removed, or None if no such edge was found.
        &#34;&#34;&#34;
        edge = self._graph.disconnect_nodes(source, target)
        if edge is not None:
            super().removeItem(edge)
        return edge

    def extract(self, other: AbstractGraph):
        &#34;&#34;&#34;Update the scheme, removing elements from a graph.
        
        `other` represents a subgraph of the scheme graph that is to be extracted.
        &#34;&#34;&#34;
        for node in other.nodes:
            self.removeItem(node)

    def merge(self, other: AbstractGraph):
        &#34;&#34;&#34;Update the scheme, adding elements from a graph.&#34;&#34;&#34;
        self._graph.merge(other)

        for node in other.nodes:
            super().addItem(node)
        for edge in other.edges:
            super().addItem(edge)

    def clear(self):
        &#34;&#34;&#34;Clear the scheme.&#34;&#34;&#34;
        super().clear()
        self._graph.clear()

    # Observer methods =================================================================================================
    def findNode(self, node_id: int) -&gt; Union[Node, None]:
        return self._graph.findNode(node_id)

    # Selection ========================================================================================================
    def selectAll(self):
        self._graph.selectAll()

    def selection(self) -&gt; GraphSnapshot:
        return self._graph.selection()
    
    def wideSelection(self) -&gt; GraphSnapshot:
        return self._graph.wideSelection()

    # User actions =====================================================================================================
    def cutEvent(self):
        &#34;&#34;&#34;Cut the selected graph and place it in the clipboard.&#34;&#34;&#34;
        self.copyEvent()
        self.deleteEvent()

    def copyEvent(self):
        &#34;&#34;&#34;Copy the selected graph and place it in the clipboard.&#34;&#34;&#34;
        snapshot = self.selection()

        package = StdMimeData()
        package.setObject(snapshot)

        clipboard = QApplication.clipboard()
        clipboard.setMimeData(package.qmimedata)

    def pasteEvent(self):
        &#34;&#34;&#34;Retrieve the data from a clipboard and paste it.&#34;&#34;&#34;
        clipboard = QApplication.clipboard()
        package = StdMimeData(clipboard.mimeData())

        if package.hasObject(GraphSnapshot):
            snapshot = package.objectData(GraphSnapshot)

            self.clearSelection()  # Clear old selection

            snapshot.selectAll()  # Create new selection (pasted items)

            offset = self.schemeStyle().pixelMetric(Style.PasteOffset)
            snapshot.moveBy(offset, offset)  # Move all items by some offset 
            
            self.merge(snapshot)

            self.copyEvent()  # Copy the selection again (nothing changes except for the item offset)

    def deleteEvent(self):
        &#34;&#34;&#34;Delete the selection.&#34;&#34;&#34;
        self.extract(self.selection())

    # Style and palette ================================================================================================
    def schemeStyleChange(self):
        pass

    def schemePaletteChange(self):
        self.setBackgroundBrush(self.schemePalette().background())

    def schemeStyle(self):
        return self._style

    def setSchemeStyle(self, style):
        self._style = style
        self.schemeStyleChange()

    def schemePalette(self):
        return self._palette
    
    def setSchemePalette(self, palette):
        self._palette = palette
        self.schemePaletteChange()

    # Widgets ==========================================================================================================
    def getView(self) -&gt; QGraphicsView:
        &#34;&#34;&#34;Generate and return a new QGraphicsView, configured for optimal viewing.&#34;&#34;&#34;
        v = QGraphicsView(self)
        v.setDragMode(QGraphicsView.RubberBandDrag)
        v.setRubberBandSelectionMode(Qt.ContainsItemShape)
        v.setRenderHint(QPainter.Antialiasing)
        v.setRenderHint(QPainter.SmoothPixmapTransform)

        cut_shortcut = QShortcut(QKeySequence.Cut, v)
        cut_shortcut.activated.connect(self.cutEvent)

        copy_shortcut = QShortcut(QKeySequence.Copy, v)
        copy_shortcut.activated.connect(self.copyEvent)

        paste_shortcut = QShortcut(QKeySequence.Paste, v)
        paste_shortcut.activated.connect(self.pasteEvent)

        delete_shortcut = QShortcut(QKeySequence.Delete, v)
        delete_shortcut.activated.connect(self.deleteEvent)

        return v

    # Serialization ====================================================================================================
    # def serialize(self) -&gt; dict: Inherited from Graph

    def deserialize(self, data: dict):
        &#34;&#34;&#34;Deserialize this object from a dict of data.&#34;&#34;&#34;
        # Clear --------------------------------------------------------------------------------------------------------
        for node in self.nodes:
            self.removeItem(node)

        # Deserialize as graph -----------------------------------------------------------------------------------------
        self._graph.deserialize(data)

        # Bring the scene up to speed ----------------------------------------------------------------------------------
        for node in self.nodes:
            super().addItem(node)

        for edge in self.edges:
            super().addItem(edge)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PySide2.QtWidgets.QGraphicsScene</li>
<li>PySide2.QtCore.QObject</li>
<li>Shiboken.Object</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.staticMetaObject"><code class="name">var <span class="ident">staticMetaObject</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.addItem"><code class="name flex">
<span>def <span class="ident">addItem</span></span>(<span>self, item)</span>
</code></dt>
<dd>
<section class="desc"><p>Add an item to the scene.</p>
<p>An override of super().addItem method that detects when a node or edge was added.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addItem(self, item: QGraphicsItem):
    &#34;&#34;&#34;Add an item to the scene.

    An override of super().addItem method that detects when a node or edge was added.
    &#34;&#34;&#34;
    if isinstance(item, Node):
        self._graph.addNode(item)
    elif isinstance(item, Edge):
        self._graph.addEdge(item)
    else:
        raise TypeError(&#34;unrecognised graphics item of type &#34; + type(item).__name__)

    super().addItem(item)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.clear"><code class="name flex">
<span>def <span class="ident">clear</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Clear the scheme.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear(self):
    &#34;&#34;&#34;Clear the scheme.&#34;&#34;&#34;
    super().clear()
    self._graph.clear()</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.connect_nodes"><code class="name flex">
<span>def <span class="ident">connect_nodes</span></span>(<span>self, source, target)</span>
</code></dt>
<dd>
<section class="desc"><p>Connect an Output connection to an Input connection with an edge.</p>
<p>Returns the newly created edge.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def connect_nodes(self, source: Output, target: Input):
    &#34;&#34;&#34;Connect an Output connection to an Input connection with an edge.
    
    Returns the newly created edge.
    &#34;&#34;&#34;
    edge = self._graph.connect_nodes(source, target)
    super().addItem(edge)

    return edge</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.copyEvent"><code class="name flex">
<span>def <span class="ident">copyEvent</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Copy the selected graph and place it in the clipboard.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def copyEvent(self):
    &#34;&#34;&#34;Copy the selected graph and place it in the clipboard.&#34;&#34;&#34;
    snapshot = self.selection()

    package = StdMimeData()
    package.setObject(snapshot)

    clipboard = QApplication.clipboard()
    clipboard.setMimeData(package.qmimedata)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.cutEvent"><code class="name flex">
<span>def <span class="ident">cutEvent</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Cut the selected graph and place it in the clipboard.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def cutEvent(self):
    &#34;&#34;&#34;Cut the selected graph and place it in the clipboard.&#34;&#34;&#34;
    self.copyEvent()
    self.deleteEvent()</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.deleteEvent"><code class="name flex">
<span>def <span class="ident">deleteEvent</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Delete the selection.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deleteEvent(self):
    &#34;&#34;&#34;Delete the selection.&#34;&#34;&#34;
    self.extract(self.selection())</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.deserialize"><code class="name flex">
<span>def <span class="ident">deserialize</span></span>(<span>self, data)</span>
</code></dt>
<dd>
<section class="desc"><p>Deserialize this object from a dict of data.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deserialize(self, data: dict):
    &#34;&#34;&#34;Deserialize this object from a dict of data.&#34;&#34;&#34;
    # Clear --------------------------------------------------------------------------------------------------------
    for node in self.nodes:
        self.removeItem(node)

    # Deserialize as graph -----------------------------------------------------------------------------------------
    self._graph.deserialize(data)

    # Bring the scene up to speed ----------------------------------------------------------------------------------
    for node in self.nodes:
        super().addItem(node)

    for edge in self.edges:
        super().addItem(edge)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.disconnect_nodes"><code class="name flex">
<span>def <span class="ident">disconnect_nodes</span></span>(<span>self, source, target)</span>
</code></dt>
<dd>
<section class="desc"><p>Remove a connection between a node output and an input.</p>
<p>If output and input are connected more than once, only one edge is removed.
Returns the edge that was removed, or None if no such edge was found.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def disconnect_nodes(self, source: Output, target: Input):
    &#34;&#34;&#34;Remove a connection between a node output and an input.
    
    If output and input are connected more than once, only one edge is removed.
    Returns the edge that was removed, or None if no such edge was found.
    &#34;&#34;&#34;
    edge = self._graph.disconnect_nodes(source, target)
    if edge is not None:
        super().removeItem(edge)
    return edge</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.extract"><code class="name flex">
<span>def <span class="ident">extract</span></span>(<span>self, other)</span>
</code></dt>
<dd>
<section class="desc"><p>Update the scheme, removing elements from a graph.</p>
<p><code>other</code> represents a subgraph of the scheme graph that is to be extracted.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def extract(self, other: AbstractGraph):
    &#34;&#34;&#34;Update the scheme, removing elements from a graph.
    
    `other` represents a subgraph of the scheme graph that is to be extracted.
    &#34;&#34;&#34;
    for node in other.nodes:
        self.removeItem(node)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.findNode"><code class="name flex">
<span>def <span class="ident">findNode</span></span>(<span>self, node_id)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def findNode(self, node_id: int) -&gt; Union[Node, None]:
    return self._graph.findNode(node_id)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.getView"><code class="name flex">
<span>def <span class="ident">getView</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Generate and return a new QGraphicsView, configured for optimal viewing.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getView(self) -&gt; QGraphicsView:
    &#34;&#34;&#34;Generate and return a new QGraphicsView, configured for optimal viewing.&#34;&#34;&#34;
    v = QGraphicsView(self)
    v.setDragMode(QGraphicsView.RubberBandDrag)
    v.setRubberBandSelectionMode(Qt.ContainsItemShape)
    v.setRenderHint(QPainter.Antialiasing)
    v.setRenderHint(QPainter.SmoothPixmapTransform)

    cut_shortcut = QShortcut(QKeySequence.Cut, v)
    cut_shortcut.activated.connect(self.cutEvent)

    copy_shortcut = QShortcut(QKeySequence.Copy, v)
    copy_shortcut.activated.connect(self.copyEvent)

    paste_shortcut = QShortcut(QKeySequence.Paste, v)
    paste_shortcut.activated.connect(self.pasteEvent)

    delete_shortcut = QShortcut(QKeySequence.Delete, v)
    delete_shortcut.activated.connect(self.deleteEvent)

    return v</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.merge"><code class="name flex">
<span>def <span class="ident">merge</span></span>(<span>self, other)</span>
</code></dt>
<dd>
<section class="desc"><p>Update the scheme, adding elements from a graph.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def merge(self, other: AbstractGraph):
    &#34;&#34;&#34;Update the scheme, adding elements from a graph.&#34;&#34;&#34;
    self._graph.merge(other)

    for node in other.nodes:
        super().addItem(node)
    for edge in other.edges:
        super().addItem(edge)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.pasteEvent"><code class="name flex">
<span>def <span class="ident">pasteEvent</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Retrieve the data from a clipboard and paste it.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pasteEvent(self):
    &#34;&#34;&#34;Retrieve the data from a clipboard and paste it.&#34;&#34;&#34;
    clipboard = QApplication.clipboard()
    package = StdMimeData(clipboard.mimeData())

    if package.hasObject(GraphSnapshot):
        snapshot = package.objectData(GraphSnapshot)

        self.clearSelection()  # Clear old selection

        snapshot.selectAll()  # Create new selection (pasted items)

        offset = self.schemeStyle().pixelMetric(Style.PasteOffset)
        snapshot.moveBy(offset, offset)  # Move all items by some offset 
        
        self.merge(snapshot)

        self.copyEvent()  # Copy the selection again (nothing changes except for the item offset)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.removeItem"><code class="name flex">
<span>def <span class="ident">removeItem</span></span>(<span>self, item)</span>
</code></dt>
<dd>
<section class="desc"><p>Add an item to the scene.</p>
<p>An override of super().removeItem method that detects when a node or edge was removed.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def removeItem(self, item):
    &#34;&#34;&#34;Add an item to the scene.

    An override of super().removeItem method that detects when a node or edge was removed.
    &#34;&#34;&#34;
    # Remove a Node ------------------------------------------------------------------------------------------------
    if isinstance(item, Node):
        # Remove connected edges first
        to_remove = []
        for edge in self._graph.edges:
            if edge.source_node() == item or edge.target_node() == item:
                to_remove.append(edge)
        
        for edge in to_remove:
            self.removeItem(edge)

        # Remove the node
        self._graph.removeNode(item)
    # Remove an Edge -----------------------------------------------------------------------------------------------
    elif isinstance(item, Edge):
        self._graph.removeEdge(item)
    # Unknown item -------------------------------------------------------------------------------------------------
    else:
        raise TypeError(&#34;unrecognised graphics item of type &#34; + type(item).__name__)

    super().removeItem(item)</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.schemePalette"><code class="name flex">
<span>def <span class="ident">schemePalette</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def schemePalette(self):
    return self._palette</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.schemePaletteChange"><code class="name flex">
<span>def <span class="ident">schemePaletteChange</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def schemePaletteChange(self):
    self.setBackgroundBrush(self.schemePalette().background())</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.schemeStyle"><code class="name flex">
<span>def <span class="ident">schemeStyle</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def schemeStyle(self):
    return self._style</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.schemeStyleChange"><code class="name flex">
<span>def <span class="ident">schemeStyleChange</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def schemeStyleChange(self):
    pass</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.selectAll"><code class="name flex">
<span>def <span class="ident">selectAll</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def selectAll(self):
    self._graph.selectAll()</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.selection"><code class="name flex">
<span>def <span class="ident">selection</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def selection(self) -&gt; GraphSnapshot:
    return self._graph.selection()</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.setSchemePalette"><code class="name flex">
<span>def <span class="ident">setSchemePalette</span></span>(<span>self, palette)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setSchemePalette(self, palette):
    self._palette = palette
    self.schemePaletteChange()</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.setSchemeStyle"><code class="name flex">
<span>def <span class="ident">setSchemeStyle</span></span>(<span>self, style)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setSchemeStyle(self, style):
    self._style = style
    self.schemeStyleChange()</code></pre>
</details>
</dd>
<dt id="nfb_studio.widgets.scheme.scheme.Scheme.wideSelection"><code class="name flex">
<span>def <span class="ident">wideSelection</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def wideSelection(self) -&gt; GraphSnapshot:
    return self._graph.wideSelection()</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="nfb_studio.widgets.scheme" href="index.html">nfb_studio.widgets.scheme</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="nfb_studio.widgets.scheme.scheme.Scheme" href="#nfb_studio.widgets.scheme.scheme.Scheme">Scheme</a></code></h4>
<ul class="two-column">
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.addItem" href="#nfb_studio.widgets.scheme.scheme.Scheme.addItem">addItem</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.clear" href="#nfb_studio.widgets.scheme.scheme.Scheme.clear">clear</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.connect_nodes" href="#nfb_studio.widgets.scheme.scheme.Scheme.connect_nodes">connect_nodes</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.copyEvent" href="#nfb_studio.widgets.scheme.scheme.Scheme.copyEvent">copyEvent</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.cutEvent" href="#nfb_studio.widgets.scheme.scheme.Scheme.cutEvent">cutEvent</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.deleteEvent" href="#nfb_studio.widgets.scheme.scheme.Scheme.deleteEvent">deleteEvent</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.deserialize" href="#nfb_studio.widgets.scheme.scheme.Scheme.deserialize">deserialize</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.disconnect_nodes" href="#nfb_studio.widgets.scheme.scheme.Scheme.disconnect_nodes">disconnect_nodes</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.extract" href="#nfb_studio.widgets.scheme.scheme.Scheme.extract">extract</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.findNode" href="#nfb_studio.widgets.scheme.scheme.Scheme.findNode">findNode</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.getView" href="#nfb_studio.widgets.scheme.scheme.Scheme.getView">getView</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.merge" href="#nfb_studio.widgets.scheme.scheme.Scheme.merge">merge</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.pasteEvent" href="#nfb_studio.widgets.scheme.scheme.Scheme.pasteEvent">pasteEvent</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.removeItem" href="#nfb_studio.widgets.scheme.scheme.Scheme.removeItem">removeItem</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.schemePalette" href="#nfb_studio.widgets.scheme.scheme.Scheme.schemePalette">schemePalette</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.schemePaletteChange" href="#nfb_studio.widgets.scheme.scheme.Scheme.schemePaletteChange">schemePaletteChange</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.schemeStyle" href="#nfb_studio.widgets.scheme.scheme.Scheme.schemeStyle">schemeStyle</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.schemeStyleChange" href="#nfb_studio.widgets.scheme.scheme.Scheme.schemeStyleChange">schemeStyleChange</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.selectAll" href="#nfb_studio.widgets.scheme.scheme.Scheme.selectAll">selectAll</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.selection" href="#nfb_studio.widgets.scheme.scheme.Scheme.selection">selection</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.setSchemePalette" href="#nfb_studio.widgets.scheme.scheme.Scheme.setSchemePalette">setSchemePalette</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.setSchemeStyle" href="#nfb_studio.widgets.scheme.scheme.Scheme.setSchemeStyle">setSchemeStyle</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.staticMetaObject" href="#nfb_studio.widgets.scheme.scheme.Scheme.staticMetaObject">staticMetaObject</a></code></li>
<li><code><a title="nfb_studio.widgets.scheme.scheme.Scheme.wideSelection" href="#nfb_studio.widgets.scheme.scheme.Scheme.wideSelection">wideSelection</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.5</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>