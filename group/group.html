<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>nfb_studio.group.group API documentation</title>
<meta name="description" content="NFB block group." />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>nfb_studio.group.group</code></h1>
</header>
<section id="section-intro">
<p>NFB block group.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;NFB block group.&#34;&#34;&#34;
from typing import Union
from collections.abc import MutableSequence

from PySide2.QtCore import QObject


class GroupMetaclass(type(QObject), type(MutableSequence)):
    pass


class Group(QObject, MutableSequence, metaclass=GroupMetaclass):
    &#34;&#34;&#34;A group of experiment blocks.
    Experiment consists of a sequence of blocks and block groups that are executed in some order. A group consists of
    a sequence of blocks. Each block can be repeated one or more times, and can be set to execute in random order.

    This class contains two lists that are always the same size: a list of blocks, and a list of repeats each block has
    set. This class also is a MutableSequence, which means you can get and set both values at once with the operator[].
    &#34;&#34;&#34;

    def __init__(self, parent=None):
        super().__init__(parent)
        
        self.blocks = []
        self.repeats = []

        self.random_order = False

        self._view = None

    def view(self):
        &#34;&#34;&#34;Return the view (config widget) for this group.&#34;&#34;&#34;
        return self._view
    
    def setView(self, view, /):
        view.setModel(self)
    
    def updateView(self):
        view = self.view()
        if view is None:
            return
        
        view.blocks.setText(&#34; &#34;.join(self.blocks))
        view.repeats.setText(&#34; &#34;.join([str(x) for x in self.repeats]))
        view.random_order.setChecked(self.random_order)

    # MutableSequence method implementations ===========================================================================
    def __getitem__(self, index):
        return (self.blocks[index], self.repeats[index])
    
    def __setitem__(self, index, value):
        del self[index]
        self.insert(index, value)
    
    def __delitem__(self, index):
        del self.blocks[index]
        del self.repeats[index]
    
    def __len__(self):
        assert len(self.blocks) == len(self.repeats)
        return len(self.blocks)
    
    def insert(self, index, value):
        &#34;&#34;&#34;Insert a new item into the group.
        Value can either be a single block or a tuple(block, repeats).
        &#34;&#34;&#34;
        if not isinstance(value, tuple):
            value = (value, 1)
        
        self.blocks.insert(index, value[0])
        self.repeats.insert(index, value[1])

    def serialize(self) -&gt; dict:
        return {
            &#34;blocks&#34;: self.blocks,
            &#34;repeats&#34;: self.repeats,
        }

    def deserialize(self, data: dict):
        self.blocks = data[&#34;blocks&#34;]
        self.repeats = data[&#34;repeats&#34;]

    # NFB Export =======================================================================================================
    def nfb_export_data(self) -&gt; dict:
        &#34;&#34;&#34;Export this group into a dict to be encoded as XML for NFBLab.
        Bool items are written as-is. The encoder is responsible for converting them into int format.
        &#34;&#34;&#34;
        # Build sList and sNumberList ----------------------------------------------------------------------------------
        name_list = []
        repeat_list = []

        for i in range(len(self)):  # FIXME: Change to regular iteration
            item = self[i]
            name_list.append(item[0])
            repeat_list.append(item[1])

        # Export XML data ----------------------------------------------------------------------------------------------
        data = {}

        data[&#34;sList&#34;] = &#34; &#34;.join(name_list)
        data[&#34;sNumberList&#34;] = &#34; &#34;.join(str(number) for number in repeat_list)
        data[&#34;bShuffle&#34;] = self.random_order

        return data
    
    @classmethod
    def nfb_import_data(cls, data: dict):
        &#34;&#34;&#34;Import this group from a dict from NFBLab.&#34;&#34;&#34;
        group = cls()

        group.random_order = bool(float(data[&#34;bShuffle&#34;]))

        if data[&#34;sList&#34;] is not None:
            group.blocks = data[&#34;sList&#34;].split(&#34; &#34;)
            group.repeats = [int(number) for number in data[&#34;sNumberList&#34;].split(&#34; &#34;)]

        return group</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="nfb_studio.group.group.Group"><code class="flex name class">
<span>class <span class="ident">Group</span></span>
<span>(</span><span>parent=None)</span>
</code></dt>
<dd>
<div class="desc"><p>A group of experiment blocks.
Experiment consists of a sequence of blocks and block groups that are executed in some order. A group consists of
a sequence of blocks. Each block can be repeated one or more times, and can be set to execute in random order.</p>
<p>This class contains two lists that are always the same size: a list of blocks, and a list of repeats each block has
set. This class also is a MutableSequence, which means you can get and set both values at once with the operator[].</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Group(QObject, MutableSequence, metaclass=GroupMetaclass):
    &#34;&#34;&#34;A group of experiment blocks.
    Experiment consists of a sequence of blocks and block groups that are executed in some order. A group consists of
    a sequence of blocks. Each block can be repeated one or more times, and can be set to execute in random order.

    This class contains two lists that are always the same size: a list of blocks, and a list of repeats each block has
    set. This class also is a MutableSequence, which means you can get and set both values at once with the operator[].
    &#34;&#34;&#34;

    def __init__(self, parent=None):
        super().__init__(parent)
        
        self.blocks = []
        self.repeats = []

        self.random_order = False

        self._view = None

    def view(self):
        &#34;&#34;&#34;Return the view (config widget) for this group.&#34;&#34;&#34;
        return self._view
    
    def setView(self, view, /):
        view.setModel(self)
    
    def updateView(self):
        view = self.view()
        if view is None:
            return
        
        view.blocks.setText(&#34; &#34;.join(self.blocks))
        view.repeats.setText(&#34; &#34;.join([str(x) for x in self.repeats]))
        view.random_order.setChecked(self.random_order)

    # MutableSequence method implementations ===========================================================================
    def __getitem__(self, index):
        return (self.blocks[index], self.repeats[index])
    
    def __setitem__(self, index, value):
        del self[index]
        self.insert(index, value)
    
    def __delitem__(self, index):
        del self.blocks[index]
        del self.repeats[index]
    
    def __len__(self):
        assert len(self.blocks) == len(self.repeats)
        return len(self.blocks)
    
    def insert(self, index, value):
        &#34;&#34;&#34;Insert a new item into the group.
        Value can either be a single block or a tuple(block, repeats).
        &#34;&#34;&#34;
        if not isinstance(value, tuple):
            value = (value, 1)
        
        self.blocks.insert(index, value[0])
        self.repeats.insert(index, value[1])

    def serialize(self) -&gt; dict:
        return {
            &#34;blocks&#34;: self.blocks,
            &#34;repeats&#34;: self.repeats,
        }

    def deserialize(self, data: dict):
        self.blocks = data[&#34;blocks&#34;]
        self.repeats = data[&#34;repeats&#34;]

    # NFB Export =======================================================================================================
    def nfb_export_data(self) -&gt; dict:
        &#34;&#34;&#34;Export this group into a dict to be encoded as XML for NFBLab.
        Bool items are written as-is. The encoder is responsible for converting them into int format.
        &#34;&#34;&#34;
        # Build sList and sNumberList ----------------------------------------------------------------------------------
        name_list = []
        repeat_list = []

        for i in range(len(self)):  # FIXME: Change to regular iteration
            item = self[i]
            name_list.append(item[0])
            repeat_list.append(item[1])

        # Export XML data ----------------------------------------------------------------------------------------------
        data = {}

        data[&#34;sList&#34;] = &#34; &#34;.join(name_list)
        data[&#34;sNumberList&#34;] = &#34; &#34;.join(str(number) for number in repeat_list)
        data[&#34;bShuffle&#34;] = self.random_order

        return data
    
    @classmethod
    def nfb_import_data(cls, data: dict):
        &#34;&#34;&#34;Import this group from a dict from NFBLab.&#34;&#34;&#34;
        group = cls()

        group.random_order = bool(float(data[&#34;bShuffle&#34;]))

        if data[&#34;sList&#34;] is not None:
            group.blocks = data[&#34;sList&#34;].split(&#34; &#34;)
            group.repeats = [int(number) for number in data[&#34;sNumberList&#34;].split(&#34; &#34;)]

        return group</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PySide2.QtCore.QObject</li>
<li>Shiboken.Object</li>
<li>collections.abc.MutableSequence</li>
<li>collections.abc.Sequence</li>
<li>collections.abc.Reversible</li>
<li>collections.abc.Collection</li>
<li>collections.abc.Sized</li>
<li>collections.abc.Iterable</li>
<li>collections.abc.Container</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="nfb_studio.group.group.Group.staticMetaObject"><code class="name">var <span class="ident">staticMetaObject</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="nfb_studio.group.group.Group.nfb_import_data"><code class="name flex">
<span>def <span class="ident">nfb_import_data</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Import this group from a dict from NFBLab.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def nfb_import_data(cls, data: dict):
    &#34;&#34;&#34;Import this group from a dict from NFBLab.&#34;&#34;&#34;
    group = cls()

    group.random_order = bool(float(data[&#34;bShuffle&#34;]))

    if data[&#34;sList&#34;] is not None:
        group.blocks = data[&#34;sList&#34;].split(&#34; &#34;)
        group.repeats = [int(number) for number in data[&#34;sNumberList&#34;].split(&#34; &#34;)]

    return group</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="nfb_studio.group.group.Group.deserialize"><code class="name flex">
<span>def <span class="ident">deserialize</span></span>(<span>self, data: dict)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deserialize(self, data: dict):
    self.blocks = data[&#34;blocks&#34;]
    self.repeats = data[&#34;repeats&#34;]</code></pre>
</details>
</dd>
<dt id="nfb_studio.group.group.Group.insert"><code class="name flex">
<span>def <span class="ident">insert</span></span>(<span>self, index, value)</span>
</code></dt>
<dd>
<div class="desc"><p>Insert a new item into the group.
Value can either be a single block or a tuple(block, repeats).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def insert(self, index, value):
    &#34;&#34;&#34;Insert a new item into the group.
    Value can either be a single block or a tuple(block, repeats).
    &#34;&#34;&#34;
    if not isinstance(value, tuple):
        value = (value, 1)
    
    self.blocks.insert(index, value[0])
    self.repeats.insert(index, value[1])</code></pre>
</details>
</dd>
<dt id="nfb_studio.group.group.Group.nfb_export_data"><code class="name flex">
<span>def <span class="ident">nfb_export_data</span></span>(<span>self) -> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Export this group into a dict to be encoded as XML for NFBLab.
Bool items are written as-is. The encoder is responsible for converting them into int format.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def nfb_export_data(self) -&gt; dict:
    &#34;&#34;&#34;Export this group into a dict to be encoded as XML for NFBLab.
    Bool items are written as-is. The encoder is responsible for converting them into int format.
    &#34;&#34;&#34;
    # Build sList and sNumberList ----------------------------------------------------------------------------------
    name_list = []
    repeat_list = []

    for i in range(len(self)):  # FIXME: Change to regular iteration
        item = self[i]
        name_list.append(item[0])
        repeat_list.append(item[1])

    # Export XML data ----------------------------------------------------------------------------------------------
    data = {}

    data[&#34;sList&#34;] = &#34; &#34;.join(name_list)
    data[&#34;sNumberList&#34;] = &#34; &#34;.join(str(number) for number in repeat_list)
    data[&#34;bShuffle&#34;] = self.random_order

    return data</code></pre>
</details>
</dd>
<dt id="nfb_studio.group.group.Group.serialize"><code class="name flex">
<span>def <span class="ident">serialize</span></span>(<span>self) -> dict</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def serialize(self) -&gt; dict:
    return {
        &#34;blocks&#34;: self.blocks,
        &#34;repeats&#34;: self.repeats,
    }</code></pre>
</details>
</dd>
<dt id="nfb_studio.group.group.Group.setView"><code class="name flex">
<span>def <span class="ident">setView</span></span>(<span>self, view)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setView(self, view, /):
    view.setModel(self)</code></pre>
</details>
</dd>
<dt id="nfb_studio.group.group.Group.updateView"><code class="name flex">
<span>def <span class="ident">updateView</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def updateView(self):
    view = self.view()
    if view is None:
        return
    
    view.blocks.setText(&#34; &#34;.join(self.blocks))
    view.repeats.setText(&#34; &#34;.join([str(x) for x in self.repeats]))
    view.random_order.setChecked(self.random_order)</code></pre>
</details>
</dd>
<dt id="nfb_studio.group.group.Group.view"><code class="name flex">
<span>def <span class="ident">view</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Return the view (config widget) for this group.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def view(self):
    &#34;&#34;&#34;Return the view (config widget) for this group.&#34;&#34;&#34;
    return self._view</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="nfb_studio.group.group.GroupMetaclass"><code class="flex name class">
<span>class <span class="ident">GroupMetaclass</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GroupMetaclass(type(QObject), type(MutableSequence)):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>Shiboken.ObjectType</li>
<li>typing.ABCMeta</li>
<li>builtins.type</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="nfb_studio.group" href="index.html">nfb_studio.group</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="nfb_studio.group.group.Group" href="#nfb_studio.group.group.Group">Group</a></code></h4>
<ul class="two-column">
<li><code><a title="nfb_studio.group.group.Group.deserialize" href="#nfb_studio.group.group.Group.deserialize">deserialize</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.insert" href="#nfb_studio.group.group.Group.insert">insert</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.nfb_export_data" href="#nfb_studio.group.group.Group.nfb_export_data">nfb_export_data</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.nfb_import_data" href="#nfb_studio.group.group.Group.nfb_import_data">nfb_import_data</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.serialize" href="#nfb_studio.group.group.Group.serialize">serialize</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.setView" href="#nfb_studio.group.group.Group.setView">setView</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.staticMetaObject" href="#nfb_studio.group.group.Group.staticMetaObject">staticMetaObject</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.updateView" href="#nfb_studio.group.group.Group.updateView">updateView</a></code></li>
<li><code><a title="nfb_studio.group.group.Group.view" href="#nfb_studio.group.group.Group.view">view</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="nfb_studio.group.group.GroupMetaclass" href="#nfb_studio.group.group.GroupMetaclass">GroupMetaclass</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>